$&&$(function(){!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.localStorage,a=function(){try{return r.setItem("test","test"),r.removeItem("test"),!0}catch(e){return!1}}();t.localStorage=r,t.isLocalStorageAvailable=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mac:/Macintosh/.test(navigator.userAgent),iosdevice:/(iPad)|(iPhone)/.test(navigator.userAgent)}},function(e,t,n){"use strict";function r(e,t,n){var r=void 0,a={event:"keydown",target:document,prevent:!1};n=d(n,a),Array.isArray(e)?(r=[],c.default.mac||(e=e.map(function(e){return e.replace("Cmd","Ctrl")})),e.forEach(function(e){return r.push(i(e,t,n))})):(c.default.mac||(e=e.replace("Cmd","Ctrl")),r=i(e,t,n));var o="string"==typeof n.target?document.querySelector(n.target):n.target;Array.isArray(r)?r.forEach(function(r,a){f[e[a]]||(f[e[a]]=[]),o.addEventListener(n.event,r,!1),f[e[a]].push({event:n.event,elem:o,fn:t,realFn:r})}):(f[e]||(f[e]=[]),o.addEventListener(n.event,r,!1),f[e].push({event:n.event,elem:o,fn:t,realFn:r}))}function a(e,t,n){function r(e){f[e]&&f[e].slice().reverse().forEach(function(e,r,a){e.fn!==t||n.target&&e.elem!==n.target||(e.elem.removeEventListener(e.event,e.realFn,!1),a.splice(a.length-1-r,1))})}n=n||{},Array.isArray(e)?e.forEach(r):r(e)}function i(e,t,n){return e=u(e).split("+"),function(r){o(r,e)&&(t(r),n.prevent&&(r.preventDefault(),r.stopPropagation()))}}function o(e,t){var n=s(e.keyCode),r={enter:13},a={},i=["shift","ctrl","alt","cmd"],o=0;i.forEach(function(e){a[e]={wanted:!1,pressed:!1}}),e.shiftKey&&(a.shift.pressed=!0),e.ctrlKey&&(a.ctrl.pressed=!0),e.altKey&&(a.alt.pressed=!0),e.metaKey&&(a.cmd.pressed=!0);for(var u=0;u<t.length;u++){var d=t[u];i.indexOf(d)>-1?(o++,a[d].wanted=!0):(d.length>1&&r[d]===e.keyCode||n===d)&&o++}return t.length===o&&Object.keys(a).reduce(function(e,t){return e&&a[t].wanted===a[t].pressed},!0)}function s(e){switch(e){case 91:case 93:return"MetaKey";case 188:return",";case 190:return".";case 219:return"[";case 221:return"]";default:return String.fromCharCode(e).toLowerCase()}}function u(e){return e.toLowerCase().replace(/\s/g,"")}function d(e,t){if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.unbindKeys=t.bindKeys=void 0;var l=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f={};t.bindKeys=r,t.unbindKeys=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode("::selection { background: transparent; }")),b.forEach(function(r){function a(){function r(){function i(){e.selectionStart=a,e.selectionEnd=o,t.removeChild(n)}t.appendChild(n),setTimeout(i,10),(0,w.unbindKeys)(v,r,{target:e})}var a=e.selectionStart,o=e.selectionEnd,v=["Cmd+Z","Ctrl+Z"];if("inline"!==s||-1===e.value.substring(a,o).indexOf("\n")){var m=d({name:i,pattern:u,text:e.value,start:a,end:o,isConsequent:!0});console.log(m),m.isWrapped?h({name:i,pattern:u,elem:e,start:a,end:o,parsed:m,prefix:l,nextPrefix:c,suffix:f}):p({name:i,pattern:u,elem:e,start:a,end:o,parsed:m,prefix:l,nextPrefix:c,suffix:f}),(0,w.bindKeys)(v,r,{target:e}),$(e).on("input",function(){(0,w.unbindKeys)(v,r,{target:e})})}}var i=r.name,o=r.keys,s=r.type,u=r.regexp,d=r.parse,l=r.prefix,c=r.nextPrefix,f=r.suffix,p=r.wrap,h=r.unwrap;(0,w.bindKeys)(o,a,{target:e,prevent:!0})})}function i(e){var t=e.elem,n=e.text,r=e.start,a=e.end,i=e.nextStart,o=e.nextEnd;t.selectionStart=r,t.selectionEnd=a,document.execCommand("insertText",!1,n),$(t).trigger("input"),t.selectionStart=i,t.selectionEnd=o}function o(e){var t=e.pattern,n=e.text,r=e.start,a=e.end,i=e.isConsequent,o=v({text:n,start:r,end:a}),s=o.value,u=o.start,d=h({text:s,start:r-u,end:a-u,pattern:t,isConsequent:i});if(!d)return{isWrapped:!1};var l=d.value.split(d.unwrappedValue);return g({},d,{isWrapped:!0,realStart:d.start+u,realEnd:d.end+u,prefixLength:l[0].length,suffixLength:l[1].length})}function s(e){var t=e.elem,n=e.start,r=e.end,a=e.prefix,o=e.suffix,s=m({elem:t,start:n,end:r});i({elem:t,text:""+a+s.value+o,start:s.start,end:s.end,nextStart:n+a.length,nextEnd:r+a.length})}function u(e){var t=e.elem,n=e.start,r=e.end,a=e.parsed,o=a.realStart,s=a.realEnd,u=a.unwrappedValue,d=a.prefixLength,l=a.suffixLength;if(!u.length)return void i({elem:t,text:u,start:o,end:s,nextStart:o,nextEnd:o});var c=o+d,f=s-l,p=n-c,h=r-f;p<0&&(h-=p,p=0),h>0&&(h=0),i({elem:t,text:u,start:o,end:s,nextStart:o+p,nextEnd:o+u.length+h})}function d(e){var t=e.elem,n=e.start,r=e.end,a=e.prefix,o=e.suffix,s=m({elem:t,start:n,end:r}),u=s.value,d=void 0;s.value?S.test(s.value)?(u=""+a+s.value+" "+o,d=s.end+a.length+1):(u=a+" "+s.value+o,d=s.start+a.length):(u=a+" "+o,d=n+a.length),i({elem:t,text:u,start:s.start,end:s.end,nextStart:d,nextEnd:d})}function l(e){var t=e.elem,n=e.start,r=e.end,a=e.parsed,i=a.realStart,o=a.unwrappedValue,s=a.prefixLength,d=o.split(" "),l=i+s;d.length>1&&S.test(d[0])?(t.selectionStart=l,t.selectionEnd=l+d[0].length):u({elem:t,start:n,end:r,parsed:a})}function c(e){var t=e.text,n=e.start,a=e.end,i=e.pattern,o=b.filter(function(e){return"block"===e.type}),s=t.split("\n").reduce(function(e,t){var s=e.lastIndex,u=s+t.length;if(!(s<=n&&u>=n||s>=n&&u<=a||s<=a&&u>=a))return g({},e,{lastIndex:u+1});var d=o.reduce(function(e,n){if(e)return e;n.regexp.lastIndex=0;var r=n.regexp.exec(t);if(r){var a=r[0],i=r[1],o=r.index,u=r.index+a.length;return{value:a,wrappedBy:n.name,unwrappedValue:i,prefixLength:a.length-i.length,start:o+s,end:u+s}}},null),l=d||{value:t,start:s,end:u};return i.lastIndex=0,{lines:[].concat(r(e.lines),[l]),lastIndex:u+1,isWrapped:e.isWrapped&&i.test(l.value)}},{lines:[],lastIndex:0,isWrapped:!0});return delete s.lastIndex,s}function f(e){var t=e.elem,n=e.start,a=e.end,o=e.prefix,s=e.pattern,u=e.nextPrefix,d=e.parsed.lines,l=d.reduce(function(e,t){var n=""+o+t.value;return s.lastIndex=0,s.test(t.value)&&u?n=""+u+t.value:t.unwrappedValue&&(n=""+o+t.unwrappedValue),[].concat(r(e),[n])},[]).join("\n"),c=d[0].start,f=d[d.length-1].end,p=n-c,h=a-f;h<c-f&&(h+=c-f-h);var v=c,m=c+l.length;i({elem:t,text:l,start:c,end:f,nextStart:v+p+o.length,nextEnd:m+h})}function p(e){var t=e.elem,n=e.start,a=e.end,o=e.pattern,s=e.parsed.lines,u=s.reduce(function(e,t){return o.lastIndex=0,[].concat(r(e),[o.test(t.value)?t.unwrappedValue:t.value])},[]).join("\n"),d=s[0].start,l=s[s.length-1].end,c=d+s[0].prefixLength,f=l,p=n-c,h=a-f;p<0&&(p=0),h<c-f&&(h+=c-f-h),i({elem:t,text:u,start:d,end:l,nextStart:d+p,nextEnd:d+u.length+h})}function h(e){var t=e.text,n=e.start,r=e.end,a=e.pattern,i=e.isConsequent,o=void 0,s=[];for(console.log(t,n,r),a.lastIndex=0;null!==(o=a.exec(t));){console.log(o);var u=o[0],d=o[1],l=o.index,c=o.index+u.length;l<=n&&c>=r&&s.push({value:u,unwrappedValue:d,start:l,end:c}),i&&(a.lastIndex=o.index+1)}return s.length?(s.sort(function(e,t){return e.value.length-t.value.length}),s[0]):null}function v(e){var t=e.text,n=e.start,r=e.end;for(n-=1;"\n"!==t[n]&&n>0;)n--;for(0!==n&&n++;"\n"!==t[r]&&r<t.length;)r++;return{value:t.substring(n,r),start:n,end:r}}function m(e){var t=e.elem,n=e.start,r=e.end,a=n,i=r,o=t.value.substr(n,r-n);if(n===r){var s=v({text:t.value,start:n,end:r}),u=s.value,d=s.start,l=h({text:u,start:n-d,end:r-d,pattern:/[^\s]+/g});l&&(a=l.start+d,i=l.end+d,o=l.value)}return{start:a,end:i,value:o}}Object.defineProperty(t,"__esModule",{value:!0});var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w=n(2),y={type:"inline",parse:o,wrap:s,unwrap:u},x={type:"block",parse:c,wrap:f,unwrap:p},b=[g({},y,{name:"bold",keys:"Cmd+B",regexp:/\*\*([^\s]{0,2}|[^\s].*?[^\s])\*\*/g,prefix:"**",suffix:"**"}),g({},y,{name:"italic",keys:"Cmd+I",regexp:/\/\/([^\s]{0,2}|[^\s].*?[^\s])\/\//g,prefix:"//",suffix:"//"}),g({},y,{name:"link",keys:"Cmd+K",regexp:/\(\(\s*(.*?)\s*\)\)/g,prefix:"((",suffix:"))",wrap:d,unwrap:l}),g({},x,{name:"header",keys:"Cmd+Alt+1",regexp:/^[^\S\n]*#[^\S\n]*([^#].*)$/g,prefix:"# "}),g({},x,{name:"subheader",keys:"Cmd+Alt+2",regexp:/^[^\S\n]*##[^\S\n]*([^#].*)$/g,prefix:"## "}),g({},x,{name:"remove headers",keys:"Cmd+Alt+0",regexp:/^[^\S\n]*#{1,2}[^\S\n]*([^#].*)$/g,wrap:p}),g({},x,{name:"increase quote level",keys:"Cmd+]",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",nextPrefix:">",unwrap:f}),g({},x,{name:"decrease quote level",keys:"Cmd+[",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",wrap:function(){}})],S=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%\/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!\/\\\w]*))?)/;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e={};return function(t){if(t){var n=t.getAttribute("data-swing-id");n||(n="swing-"+Math.floor(1e5*Math.random()),t.setAttribute("data-swing-id",n)),e[n]&&clearTimeout(e[n]);var r=0;!function t(a){var i=(1/(Math.pow(r,1.25)/20+.5)-.05)*Math.sin(r/2);a.style.transform="translateX("+(0+100*i)+"px)",r++,r<82?e[n]=setTimeout(t.bind(null,a),14):a.style.transform="translateX(0px)"}(t)}}}();t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=$(".search-field");if(e.length){var t=f.default.ratifiedVars?parseInt(f.default.ratifiedVars["--searchFieldMaxWidth"],10):parseInt(window.getComputedStyle(e.get(0)).getPropertyValue("--searchFieldMaxWidth"),10);i(e,t),window.addEventListener("resize",i.bind(null,e,t))}}function i(e,t){var n=e.get(0).getBoundingClientRect().left,r=void 0;r=e.hasClass("search-field-left-anchored")?$(window).width()-n:n,r<t?o("search-field__input",".search-field { --searchFieldMaxWidth: "+r+"px; }"):o("search-field__input",".search-field { --searchFieldMaxWidth: "+t+"px; } .search-field__input { max-width: "+r+"px; }"),f.default.run()}function o(e,t){void 0===t&&(t=e,e=null);var n=document.head||document.getElementsByTagName("head")[0];if(e){var r=document.getElementById(e);r?r.innerHTML=t:(r=document.createElement("style"),r.id=e,r.innerHTML=t,n.appendChild(r))}else{var a=document.createElement("style");a.innerHTML=t,n.appendChild(a)}}function s(e){if(window.event&&(e=window.event),!/textarea|input/i.test((e.srcElement||e.target).tagName)&&(x.default.mac&&e.altKey&&!e.shiftKey||!x.default.mac&&e.ctrlKey)){var t=null;37===e.keyCode&&(t=document.getElementById("link-prev")),39===e.keyCode&&(t=document.getElementById("link-next")),38===e.keyCode&&(t=document.getElementById("link-later")),40===e.keyCode&&(t=document.getElementById("link-earlier")),t&&t.href&&(window.location.href=t.href,window.event&&(window.event.returnValue=!1),e.preventDefault&&e.preventDefault())}}function u(){var e=$(".e2-textarea-autosize")[0];if(e){var t=parseInt(e.style.height);if(e.scrollHeight>t)e.style.height=e.scrollHeight+"px";else for(;e.scrollHeight===t;)t-=50,e.style.height=t+"px",e.style.height=e.scrollHeight+"px";$(e).trigger("autosized")}}function d(e){var t=e.$note,n=e.endpointSuffix,r=t.find("h1 a"),a=t.attr("id").replace("e2-note-",""),i=r.length?r.attr("href"):window.location.origin+window.location.pathname,o=i+n;(0,h.default)({noteId:a,endpointUrl:o})}var l=n(0),c=n(7),f=r(c),p=n(8),h=r(p),v=n(5),m=r(v);n(9),n(10),n(11);var g=n(3),w=r(g),y=n(1),x=r(y);f.default.run(a);var b=document.getElementById("text");if(b&&(0,w.default)(b),$("a").each(function(){var e=$(this).attr("linkredir");if(e){var t=$(this);t.attr("href",e+t.attr("href")).attr("linkredir","")}}),x.default.iosdevice&&$(".e2-comment-actions").removeClass("comment-secondary-controls"),document.getElementById("e2-login-sheet")){$("#e2-password").focus();var S=!1;$("#form-login").submit(function(){return!!S||($?($(".input-disableable").attr("disabled","disabled"),$("#e2-password").blur(),$("#password-checking").fadeIn(333),$.ajax({url:$("#e2-check-password-action").attr("href"),type:"post",timeout:1e4,data:{password:$("#e2-password").val()},success:function(e){$(".input-disableable").removeAttr("disabled"),"password-correct"===e?($("#password-checking").hide(),$("#password-correct").fadeIn(333),S=!0,setTimeout(function(){$("#form-login").submit()},333)):($("#password-checking").fadeOut(333),$("#e2-password").focus(),(0,m.default)(document.getElementById("e2-login-window")))},error:function(){S=!0,$("#form-login").submit()}}),!1):""!==document.getElementById("e2-password").value&&void 0)})}$("#e2-visual-login").length&&($(document).mousemove(function(e){var t=$("#e2-visual-login").offset(),n=t.left,r=t.top,a=e.pageX,i=e.pageY,o=Math.pow(Math.pow(a-n,2)+Math.pow(i-r,2),.5);o=Math.max(Math.min(o,600),100),o=(o-100)/500,$("#e2-visual-login").css("opacity",.25+.75*(1-o))}),$("#e2-visual-login").click(function(){return $("#e2-visual-login").css("visibility","hidden"),$("#e2-login-sheet").addClass("e2-show"),setTimeout(function(){$("#e2-password").focus()},100),!1})),$("#e2-subscribe-sheet").length&&$("#e2-note-subscribe-button").addClass("e2-note-subscribe-button-visible"),$("#e2-note-subscribe-button").length&&$("#e2-note-subscribe-button").click(function(){return $("#e2-subscribe-sheet").addClass("e2-show"),!1}),document.$e2HideLoginSheet=function(){$("#e2-password").blur(),$("#e2-login-sheet").removeClass("e2-show"),$("#e2-visual-login").css("visibility","visible")},document.$e2HideSubscribeSheet=function(){$("#e2-subscribe-sheet").removeClass("e2-show")},$("#e2-login-sheet").length&&$("#e2-login-sheet").click(function(e){$("#e2-login-sheet").hasClass("e2-hideable")&&e.target===this&&document.$e2HideLoginSheet()}),$("#e2-subscribe-sheet").length&&$("#e2-subscribe-sheet").click(function(e){e.target===this&&document.$e2HideSubscribeSheet()}),$(document).keyup(function(e){27===e.keyCode&&(document.$e2HideSubscribeSheet(),$("#e2-login-sheet").hasClass("e2-hideable")&&document.$e2HideLoginSheet())}),$("#e2-search").submit(function(){if(/^ *$/.test($("#query").val()))return!1});var C=$(".search-field__input"),k=$(".search-field__zoom-icon"),E=$(".search-field__tags-icon");C.focusin(function(){C.addClass("search-field__input_focused"),k.addClass("search-field__zoom-icon_focused")}),C.focusout(function(e){$(e.relatedTarget).hasClass("search-field__tags-icon")||E.is(":active")||(k.removeClass("search-field__zoom-icon_focused"),C.removeClass("search-field__input_focused"))}),k.click(function(){return C.focus()}),$(document).bind("keydown keyup keypress",function(e){if(13===e.keyCode||13===e.which){var t=e.target||e.srcElement;if(t&&t.form){if($(t.form).hasClass("e2-enterable"))return;if(!e.ctrlKey&&$(t).is("textarea"))return;return e.preventDefault(),e.ctrlKey&&"keydown"===e.type&&($("#submit-button").attr("disabled")||$(t.form).submit()),!1}}}),$(document).bind("keyup",function(e){69!==e.keyCode&&69!==e.which||!e.altKey||$(".e2-edit-link").length>0&&(window.location.href=$(".e2-edit-link").eq(0).attr("href"))}),$(".e2-textarea-autosize").bind("input resize",u),u(),document.addEventListener?document.addEventListener("keyup",s,!1):document.attachEvent&&document.attachEvent("onkeydown",s);var _=$(".e2-note");if(_.length&&l.isLocalStorageAvailable){var I=$("#e2-note-read-href").attr("href");_.map(function(e,t){var n=$(t);n.find(".e2-published").length&&d({$note:n,endpointSuffix:I})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a={run:function(e){if(window.CSS&&window.CSS.supports&&window.CSS.supports("(--foo: red)"))return void(e&&e());a.cb=e,a.ratifiedVars={},a.varsByBlock={},a.oldCSS={},a.findCSS(),a.updateCSS()},findCSS:function(){var e=document.querySelectorAll('style:not([id*="inserted"]), link[type="text/css"], link[rel="stylesheet"]');a.processedStyles=e.length;var t=1;[].forEach.call(e,function(e){var n=void 0;"STYLE"===e.nodeName?(n=e.innerHTML,a.findSetters(n,t),a.processedStyles--):"LINK"===e.nodeName&&(a.getLink(e.getAttribute("href"),t,function(e,t){var n=t.responseText;a.findSetters(n,e),a.oldCSS[e]=n,a.updateCSS(),!--a.processedStyles&&a.cb&&a.cb()}),n=""),a.oldCSS[t]=n,t++})},findSetters:function(e,t){a.varsByBlock[t]=e.match(/(?!var)--[a-zA-Z0-9\-]+:(\s?)(.+?)[;}]/gim)},updateCSS:function(){a.ratifySetters(a.varsByBlock);for(var e in a.oldCSS){var t=a.replaceGetters(a.oldCSS[e],a.ratifiedVars);if(document.querySelector("#inserted"+e))document.querySelector("#inserted"+e).innerHTML=t;else{var n=document.createElement("style");n.innerHTML=t,n.id="inserted"+e,document.getElementsByTagName("head")[0].appendChild(n)}}},replaceGetters:function(e,t){for(var n in t){var r=new RegExp("var\\(\\s*?"+n.trim()+"(\\)|,([\\s\\,\\w]*\\)))","g");e=e.replace(r,t[n])}for(var a=/var\(\s*?([^)^,\.]*)(?:[\s\,])*([^)\.]*)\)/g,i=a.exec(e);i;)e=e.replace(i[0],i[2]),i=a.exec(e);return e},ratifySetters:function(e){for(var t in e)e[t].forEach(function(e){e=e.replace(/[{;]/g,"");var t=e.split(/:\s*/),n=r(t,2),i=n[0],o=n[1];a.ratifiedVars[i]=o})},getLink:function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.overrideMimeType("text/css"),r.onload=function(){r.status>=200&&r.status<400?n(t,r,e):console.warn("error was returned from:",e)},r.onerror=function(){console.warn("cant get css from:",e)},r.send()}};t.default=a},function(e,t,n){"use strict";function r(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=new XMLHttpRequest;r.open("GET",u),r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200!==r.status?setTimeout(function(){t(e,n+2)},1e3*n):e())},r.send()}function n(){var e=JSON.parse(a.localStorage.getItem(i)||"[]");e.push(r),a.localStorage.setItem(i,JSON.stringify(e))}var r=e.noteId,u=e.endpointUrl;if(a.isLocalStorageAvailable){if(-1===JSON.parse(a.localStorage.getItem(i)||"[]").indexOf(r))var d=0,l=setInterval(function(){s&&r===document.e2.currentNoteId&&++d>=o&&(clearInterval(l),t(n))},1e3)}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i="read-info",o=1,s=!0;window.addEventListener("focus",function(){return s=!0}),window.addEventListener("blur",function(){return s=!1}),t.default=r},function(e,t,n){"use strict";function r(){var e=0,t=0,n=0,r=0;"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight,n=window.screenY,r=window.screenX):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=window.screenTop,r=window.screenLeft):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight,n=window.screenTop,r=window.screenLeft);var a={};return a.width=e,a.height=t,a.top=n,a.left=r,a}function a(){var e=/^([a-z0-9_.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i,t=$("#name"),n=$("#email"),r=$(".e2-gips"),a=!0,i=r.hasClass("required");t.length&&i&&!t.val()&&(a=!1),n.length&&i&&!e.test(n.val())&&(a=!1),a=a&&$("#text").val(),a?$("#submit-button").removeAttr("disabled"):$("#submit-button").attr("disabled","disabled")}function i(e,t){var n=new Date((new Date).getTime()+5184e6);document.cookie=e+"="+t+";path=/;expires="+n.toUTCString()}var o=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(o);$("#form-comment").length&&($(".required").bind("input blur cut copy paste keypress",a),a(),$("#form-comment").show()),$("#form-comment").submit(function(e){var t=$(".e2-gips"),n=$("#name"),r=$("#email"),a=/^([a-z0-9_.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;return i($(this).data("cookie"),$(this).data("cookie-value")),!(t.length&&t.is(":visible")&&t.hasClass("required"))||(!!(t.hasClass("required")&&n.val()&&a.test(r.val()))||((0,s.default)(t[0]),!1))}),$(".e2-email-fields-revealer").click(function(e){e.preventDefault(),$(".e2-email-fields").show(),a(),$(this).hide()}),$(".e2-gips a.e2-gip-link").click(function(e){e.preventDefault();var t=$(this).attr("href"),n=r(),a=n.left+n.width/2-300,i=n.top+n.height/2-300;a<0&&(a=50),i<0&&(i=50),window.open(t,"gips","left="+a+",top="+i+",width=600,height=600,centerscreen")}),window.oauthAuthorized=function(e){$(".e2-hide-on-login").hide(),$(".e2-gips").removeClass("required"),$(".e2-gip-info").find(".name").text(e.name).end().find(".e2-gip-icon").html(e.gipIcon).end().find(".e2-gip-logout-url").attr("href",e.logoutUrl).end().show(),a()}},function(e,t,n){"use strict";function r(){/^ *$/.test($("#password").val())?$("#submit-button").attr("disabled","disabled"):$("#submit-button").removeAttr("disabled")}$("#password").length&&($(".required").bind("input blur cut copy paste keypress",r),r())},function(e,t,n){"use strict";function r(e){var t=e>99?0:parseInt(99*Math.pow((1-e/100)/2,1.5))+1;i.each(function(){var e=$(this);e[parseInt(e.data("weight"),10)>t?"show":"hide"]()})}function a(e){var t=void 0;t=e.originalEvent.touches&&e.originalEvent.touches.length>0?e.originalEvent.changedTouches[0].clientX:e.clientX;var n=t-$("#e2-tag-slide").offset().left;n<0&&(n=0),n>100&&(n=100),$("#e2-tag-slider").css("left",n),r(n),e.stopPropagation(),e.preventDefault()}var i=void 0;$("#e2-tags").length&&function(){i=$(".e2-tag"),r(50),$("#e2-tag-slider").show(),$("#e2-tag-slide-area").bind("mousedown touchstart",function(e){$(document.body).on("mousemove touchmove",a),$(document.body).one("mouseup touchend touchcancel",function(){return $(document.body).off("mousemove touchmove",a)}),a(e)})}()}])});